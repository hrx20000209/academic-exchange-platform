webpackJsonp([6],{"78TR":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABUCAYAAAAh+XGnAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAHvSURBVHhe7djRbcIwFIXhbAAbIPWpfQKJATICEyBGYISMACOwASOQDTICEwAjuDpuEqlI5VSpyb0155fuQwwP6JPtqC2CepiASAIiCYgkIJKASAIiCYgkINIgoOVy6W7W63W4XC7tL0xXNkCYZyD9CchLz0TKCgg4qZGyArper8mRsgJCqZGyA0IpkbIEQqmQkgK9vX/E6WLPqep+z6MB0pBeBggzpCyOGEtAJAGRBERyA9StW899P63/JgGRdMRIAiLpiJEERNIRIwmIpCNGEhBJR4wkIJKOGElAJB0xkoBISYG6f8oPnWclIJIbIK8JiCQgkjug2+0W6rruxzpXQNvtNkyn01AURT943u/37TfGzw3QbreLIJPJJEJVVRU2m00Phc8tcgGEY4WdApymadrVr06nU49kkQugDmG1WrUr35vNZvFzfG/sXACxsLMAdL+7xsg9UHc3YRdZ5BoIlzVwrHYPcgmES3uxWPQ7xwoHuQTCKx448/k8YlnmEqgsywhk8da6zzWQh1wCeUpAJJdAuHsOh0P7ZJs7oPP5HO8fzPF4bFftcgeE8HrHnxfAss4lkKcERBIQSUAkAZEERBIQSUAkAZEERDID+m8zJAGRBgG9UgIiCYgkIJKASAIiCYgkIJKASAIiCehhIXwC5PmQOhUj0TcAAAAASUVORK5CYII="},Gn4X:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("ToqD"),s=(i("Us0+"),i("Icdr")),r={name:"Overviews",data:function(){return{id:this.$route.params.paper_id,title:"",authors:[],abstract:"",reference:[],venue:{},url:"",citation_by_year:[],flag:1,relatedArticle:[],references:[],year:"",Ydata:[],oneData:{children:[],name:"高压总表计102",id:"1"},da:{},f:1}},mounted:function(){console.log("333"),this.getRe(this.id),this.search(this.id),console.log(this.title)},methods:{search:function(t){var e=this;a.a.getMsg(t).then(function(t){e.length=t.data.hits.total.value,e.$store.state.abstract="",e.$store.state.references=[],e.reference=[],e.citation_by_year=[];for(var i=0;i<e.length;i++){var a=t.data.hits.hits[0];e.title=a._source.title,e.$store.commit("setTitle",a._source.title),e.year=a._source.year,void 0===a._source.url?e.flagLoad=!1:e.urlArticle=a._source.url,void 0===a._source.abstract?e.flag=0:e.$store.commit("setAbstract",a._source.abstract);for(var s=0;s<a._source.citation_by_year.length;s++)e.citation_by_year.push(a._source.citation_by_year[s]);for(var r=0;r<a._source.reference.length;r++)e.reference.push(a._source.reference[r]),e.$store.commit("setReferences",a._source.reference[r]);for(var o=0;o<a._source.authors.length;o++)e.authors.push(a._source.authors[o]);e.searchRelated(),e.searchRe(),e.citation()}})},searchRe:function(){var t=this;this.$store.state.refer=[],console.log("进入");for(var e=0;e<this.reference.length;e++)console.log("1.1"),console.log(this.reference[e]),a.a.getRe(this.reference[e]).then(function(e){var i=e.data.hits.hits[0];t.references.push(i._source),t.$store.commit("setRefer",i._source),da.push({children:[]},{name:t.title}),console.log(t.$store.state.refer),console.log(t.$store.state.refer.length)})},searchRelated:function(){var t=this;console.log("related"),a.a.getTitle(this.$store.state.title).then(function(e){console.log(e.data),t.length=e.data.hits.total.value;for(var i=0;i<t.length-1;i++){var a=e.data.hits.hits[i+1];t.relatedArticle[i]=a,console.log(t.relatedArticle[i]),console.log(t.relatedArticle[i]._source.title),console.log(t.relatedArticle[i]._score)}}),setTimeout(function(){t.buildPie()},400)},getVisit:function(t){console.log("获取"),this.axios({method:"post",url:"http://139.9.132.83:8000/search/visitpaper",data:{paper_id:t}}).then(function(t){console.log(t.data)})},getRe:function(t){var e=this;this.axios({method:"get",url:"http://139.9.132.83:8000/getReferences?paper_id="+t,data:{paper_id:t}}).then(function(t){console.log(t.data),e.da=t.data.data,console.log(e.da),console.log(e.oneData),0===e.da.children.length?e.f=0:e.buildPie2()})},buildPie2:function(){var t=this,e=s.init(document.getElementById("chart4")),i={tooltip:{trigger:"item",triggerOn:"mousemove"},series:[{type:"tree",data:[this.da],top:"1%",left:"7%",bottom:"1%",right:"20%",symbolSize:7,label:{normal:{position:"left",verticalAlign:"middle",align:"right",fontSize:9}},leaves:{label:{normal:{position:"right",verticalAlign:"middle",align:"left"}}},expandAndCollapse:!0,animationDuration:550,animationDurationUpdate:750}]};e.setOption(i),e.on("click",function(e){console.log(e.data.id),t.getVisit(e.data.id),t.jumpPaperRe(e.data.id)})},citation:function(){if(console.log("111111111"),0===this.citation_by_year.length)this.Ydata=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],console.log("等于0");else{this.Ydata=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(var t=0;t<this.citation_by_year.length;t++){console.log("sjia");for(var e=1992;e<2016;e++)this.citation_by_year[t].year===e+""&&(this.Ydata[e-1992]=this.citation_by_year[t].cnt,console.log(this.citation_by_year[t].year+","+this.citation_by_year[t].cnt),console.log(this.Ydata[e-1992]),console.log("right"))}}},buildPie:function(){var t=this;console.log("build"),console.log(this.relatedArticle);var e=s.init(document.getElementById("chart1")),i=s.init(document.getElementById("chart2")),a=[];console.log("re"),console.log(this.citation_by_year.length);for(var r=0;r<this.relatedArticle.length-1;r++)console.log(this.relatedArticle[r]._source.title),console.log(this.relatedArticle[r]._score),a.push({value:this.relatedArticle[r]._score,name:this.relatedArticle[r]._source.title,id:this.relatedArticle[r]._source.id});console.log("这里是ydata"),console.log(this.Ydata);var o=this.randomColor(),n={tooltip:{trigger:"item",formatter:"{a} <br/>{b}  {c} ({d}%)"},legend:{data:[{name:"Citation"}]},xAxis:{data:[1992,1993,1994,1995,1996,1997,1998,1999,2e3,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015]},yAxis:[{name:"Citation",axisLine:{lineStyle:{color:o,width:1}}}],series:[{name:"Citation",type:"bar",data:this.Ydata,itemStyle:{color:o}}]},l={title:{text:"相关文献",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b}  {c} ({d}%)"},series:[{name:"成员被引用量",type:"pie",radius:["30%","70%"],itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},data:this.addColor(a)}]};e.setOption(n),i.setOption(l),i.on("click",function(e){console.log(e.data.id),t.getVisit(e.data.id),t.jumpPaperRe(e.data.id)})},jumpPaperRe:function(t){var e="/article/"+t+"/overviews";this.$router.push(e),this.$router.go(0)},addColor:function(t){for(var e=t,i=0;i<t.length;i++){t[i].itemStyle={color:this.randomColor()}}return e},randomColor:function(){return"rgb("+Math.floor(120*Math.random())+","+Math.floor(120*Math.random())+","+Math.floor(256*Math.random())+")"}}},o={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"grey"},[i("div",{staticStyle:{height:"20px"}}),t._v(" "),i("div",{staticStyle:{height:"100%",width:"80%",overflow:"hidden","margin-bottom":"5px","margin-left":"10%"}},[i("div",{staticClass:"bigFrame",staticStyle:{float:"left","margin-bottom":"10px"}},[t._m(0),t._v(" "),i("div",{staticClass:"downFrame"},[i("div",{staticClass:"downFrameContent"},[""===this.$store.state.abstract?i("div",[t._m(1)]):i("div",[t._v("\n            "+t._s(this.$store.state.abstract)+"\n          ")])])])])]),t._v(" "),i("div",{staticStyle:{height:"20px"}}),t._v(" "),t._m(2),t._v(" "),i("div",{staticStyle:{width:"80%","margin-left":"10%"}},[i("div",{staticClass:"tree",staticStyle:{height:"600px",width:"97%","margin-left":"10px","margin-bottom":"10px"}},[t._m(3),t._v(" "),i("div",{staticClass:"downFrame",staticStyle:{"margin-bottom":"20px"}},[i("div",{staticClass:"statsFrameContent"},[1===this.f?i("div",[i("div",{staticStyle:{height:"500px"},attrs:{id:"chart4"}})]):i("div",[t._m(4)])])])]),t._v(" "),i("div",{staticStyle:{height:"20px"}})])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"upFrame"},[e("div",{staticClass:"upFrameContent"},[this._v("摘要")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notAbstract"},[e("div",{staticStyle:{height:"30px"}}),this._v(" "),e("div",{staticStyle:{"text-align":"center"}},[e("img",{attrs:{src:i("78TR")}})]),this._v(" "),e("div",{staticStyle:{"text-align":"center"}},[this._v("\n                无摘要\n              ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"textFrame"},[e("div",{staticClass:"stats",staticStyle:{"margin-top":"10px","margin-bottom":"10px"}},[e("div",{staticClass:"statsFrame",staticStyle:{"margin-bottom":"10px"}},[e("div",{staticClass:"upFrame"},[e("div",{staticClass:"upFrameContent"},[this._v("引 用 量")])]),this._v(" "),e("div",{staticClass:"downFrame"},[e("div",{staticClass:"statsFrameContent"},[e("div",{attrs:{id:"chart1"}})])])]),this._v(" "),e("div",{staticStyle:{width:"4%",float:"left",height:"10px"}}),this._v(" "),e("div",{staticClass:"statsFrame"},[e("div",{staticClass:"upFrame"},[e("div",{staticClass:"upFrameContent"},[this._v("相 关 文 献")])]),this._v(" "),e("div",{staticClass:"downFrame"},[e("div",{staticClass:"statsFrameContent"},[e("div",{attrs:{id:"chart2"}})])])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"upFrame"},[e("div",{staticClass:"upFrameContent"},[this._v("引用文献")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notAb"},[e("div",{staticStyle:{height:"200px"}}),this._v(" "),e("div",{staticStyle:{"text-align":"center"}},[e("img",{attrs:{src:i("tdoA")}})]),this._v(" "),e("div",{staticStyle:{"text-align":"center"}},[this._v("\n                无引用文献\n              ")])])}]};var n=i("VU/8")(r,o,!1,function(t){i("iFlH")},"data-v-f6db3a78",null);e.default=n.exports},iFlH:function(t,e){},tdoA:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABTCAYAAAAr3tHWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAEVSURBVHhe7dixDYMwGAXhzJIqqZmH/StYwZHRuYlEcGJDbOs+6RVQoZP+hlvQxhAwBAwBQ8AQMAQMAUPAEMgOMU1Tc5vnOSzLwheW6TpEXK0YX4doRe0Y3YeIEWrE6D7Euq5VYnQfIqoRY4gQUWmMYUJEJTGKQ9wfz23J0XMt6Xs+LcbINXSIuFzdnsYRQ8AQMAQuD5He/3vv9t7vMQQ8DRgCngYMAU8DhoCnAUPA04Ah4GnAEPA0YAgUh0g/Z3/dWQyBy0O0yhAwBAwBQ8AQMAQMAUPAEDAEDAFDwBAwBAwBQ8AQMAQMAUPAEDAEDAFDwBAwBAwBQ8AQOD1Eb8tlCGSHGJ0hYAgYAoaAIWAIGAKG2ITwAhd3MMP635RxAAAAAElFTkSuQmCC"}});
//# sourceMappingURL=6.ec78cd5996382051c755.js.map