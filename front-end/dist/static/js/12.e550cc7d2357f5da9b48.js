webpackJsonp([12],{rzsW:function(t,e,a){"use strict";var i,r,n,o=a("Xxa5"),s=a.n(o),l=a("exGp"),c=a.n(l),u=a("mtWM"),p=a.n(u),h=this,d={getRealPic:(n=c()(s.a.mark(function t(e){var a,i;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a="http://139.9.132.83:8000/user/getImage?author_id="+e,t.next=3,p()({url:a,responseType:"arraybuffer"});case 3:return i=t.sent,t.abrupt("return",i);case 5:case"end":return t.stop()}},t,h)})),function(t){return n.apply(this,arguments)}),getTopPaper:(r=c()(s.a.mark(function t(){var e,a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e="http://139.9.132.83:8000/getPopPaper",t.next=3,p()({url:e});case 3:return a=t.sent,t.abrupt("return",a);case 5:case"end":return t.stop()}},t,h)})),function(){return r.apply(this,arguments)}),getUsrId:(i=c()(s.a.mark(function t(e){var a,i;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a="http://139.9.132.83:8000/user/get_user_id?author_id="+e,t.next=3,p()({url:a});case 3:return i=t.sent,t.abrupt("return",i);case 5:case"end":return t.stop()}},t,h)})),function(t){return i.apply(this,arguments)})};e.a=d},xNKt:function(t,e){},yE7a:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("rzsW"),r=a("1IRg"),n=a("ToqD"),o=a("Icdr"),s={name:"Institution",components:{Nav_with_searchBox:r.a},data:function(){return{redraw:1,maxSize:50,maxNameLen:10,pic:{},row_size:6,InstitutionName:"",members:0,RG_score:0,citeTime:0,AuthorPapers:[],AuthorCitation:[],paperCitation:[],papers:[],authors:[],currentPage:1,pagesize:7,currentPage_author:1,pagesize_author:3,years:[],y_cites:[],y_pub:[],modalShow:!0}},created:function(){},mounted:function(){var t=this.$route.query.id;console.log("id is",t),this.test(t)},methods:{buildPie1:function(t){var e=o.init(document.getElementById("chart1")),a=o.init(document.getElementById("chart2")),i=o.init(document.getElementById("chart3")),r=o.init(document.getElementById("chart4")),n=this.randomColor(),s=this.randomColor(),l={backgroundColor:"#FFF",tooltip:{trigger:"item",formatter:"{a} <br/>{b}年   {c}篇"},legend:{data:[{name:"Citation"},{name:"Publication"}]},xAxis:{data:this.years},yAxis:[{name:"Citation",axisLine:{lineStyle:{color:n,width:1}}},{name:"Publication",axisLine:{lineStyle:{color:s}}}],series:[{name:"Citation",type:"bar",data:this.y_cites,itemStyle:{color:n}},{name:"Publication",type:"bar",data:this.y_pub,itemStyle:{color:s}}]},c={color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"],title:{text:"成员发表论文量",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>姓名：{b}<br/>文章数量：{c} ({d}%)"},series:[{name:"成员发表论文量",radius:["55%","70"],label:{alignTo:"labelLine",textStyle:{color:""}},labelLine:{},minShowLabelAngle:7,type:"pie",data:this.paperCitation}]},u={title:{text:"成员被引用次数",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>姓名：{b}<br/>被引用量：{c} ({d}%)"},series:[{name:"成员被引次数",color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"],radius:["55%","70"],label:{alignTo:"labelLine",textStyle:{color:""}},labelLine:{},minShowLabelAngle:7,type:"pie",data:this.paperCitation}]},p={title:{text:"论文被引用量",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>题目：{b}<br/>引用量：{c} ({d}%)"},series:[{name:"论文被引用量",color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"],radius:["55%","70"],label:{alignTo:"labelLine",textStyle:{color:""}},labelLine:{},minShowLabelAngle:7,type:"pie",data:this.paperCitation}]};e.setOption(l),a.setOption(c),i.setOption(u),r.setOption(p),a.on("click",function(e){console.log(e.data.id,e.data.name),t.jump2authors(e.data.id)}),i.on("click",function(e){console.log(e.data.id,e.data.name),t.jump2authors(e.data.id)}),r.on("click",function(e){t.jump2papers(e.data.id)})},luanxu:function(t){for(var e=t.length,a=0;a<e;a++){var i=Math.floor(Math.random()*(e-a)),r=t[i];t[i]=t[e-a-1],t[e-a-1]=r}return t},addColor:function(t){for(var e=t,a=0;a<t.length;a++){t[a].itemStyle={color:this.randomColor()}}return e},randomColor:function(){for(var t=Math.floor(180*Math.random()),e=Math.floor(256*Math.random()),a=Math.floor(200*Math.random());.299*t+.578*e+.114*a>=130;)t=Math.floor(180*Math.random()),e=Math.floor(256*Math.random()),a=Math.floor(200*Math.random());return"rgb("+t+","+e+","+a+")"},handleCurrentChange:function(t){this.currentPage=t},handleCurrentChange_author:function(t){var e=this;this.currentPage_author=t;var a=this.authors.slice((this.currentPage_author-1)*this.pagesize_author,this.currentPage_author*this.pagesize_author);console.log("pageAuthor is",a),this.pic.hasOwnProperty(this.currentPage_author)||(this.pic[this.currentPage_author]=[]);for(var r=0;r<a.length;r++)for(var n=a[r],o=0;o<n.length;o++){var s=n[o];i.a.getRealPic(s.id).then(function(t){var a="data:image/png;base64,"+btoa(new Uint8Array(t.data).reduce(function(t,e){return t+String.fromCharCode(e)},""));e.pic[e.currentPage_author].push(a),e.rerender()})}},rerender:function(){this.modalShow=!1,this.modalShow=!0},test:function(t){var e=this,a=this;n.a.getInstitutionMsg(t).then(function(t){var i=t.data.hits.hits[0]._source;console.log("info is ",i),e.fillCites(i),e.fillPaperCites(i),e.fillAuthorCites(i),e.fillAuthorPubs(i),e.fillAuthors(i),e.fillPapers(i),e.fillAttribute(i),e.buildPie1(a),e.handleCurrentChange_author(1)})},jump2authors:function(t){var e=this;n.a.getAuthorInfo(t).then(function(a){console.log(a),a.data.hits.hits.length>0&&e.$router.push({path:"/authorPage",query:{id:t}})})},jump2papers:function(t){var e="/article/"+t+"/overviews";this.$router.push(e)},getPic:function(t,e){return console.log("pic is",this.pic[e]),this.pic[e]},fillAttribute:function(t){this.members=t.authors.length,this.citeTime=t.n_citation,this.RG_score=t.n_pubs,this.InstitutionName=t.name},fillPapers:function(t){for(var e=0;e<t.pubs.length;e++){var a=t.pubs[e],i={};i.id=a.id,i.title=a.title,i.cites=a.n_citation,this.papers.push(i)}},fillAuthors:function(t){for(var e=[],a=0,i=0;i<t.authors.length;i++){var r=t.authors[i],n={};n.name=r.name,n.id=r.id,n.pubs=r.n_pubs,n.cite=r.n_citation,e.push(n),++a===this.row_size&&(this.authors.push(e),e=[],a=0)}0!==a&&this.authors.push(e)},fillAuthorCites:function(t){t.authors.sort(function(t,e){return e.n_citation-t.n_citation});var e=t.authors.length>=this.maxSize?t.authors.slice(0,this.maxSize):t.authors;e=this.luanxu(e);for(var a=0;a<e.length;a++){var i=e[a],r={};r.name=i.name,r.value=i.n_citation,r.id=i.id,this.AuthorCitation.push(r)}},fillAuthorPubs:function(t){t.authors.sort(function(t,e){return e.n_pubs-t.n_pubs});var e=t.authors.length>=this.maxSize?t.authors.slice(0,this.maxSize):t.authors;e=this.luanxu(e);for(var a=0;a<e.length;a++){var i=e[a],r={};r.name=i.name,r.value=i.n_pubs,r.id=i.id,this.AuthorPapers.push(r)}},shortName:function(t){return t.length>this.maxNameLen?t.slice(0,this.maxNameLen)+"...":t},fillPaperCites:function(t){t.pubs.sort(function(t,e){return e.n_citation-t.n_citation});var e=t.pubs.length>=this.maxSize?t.pubs.slice(0,this.maxSize):t.pubs;e=this.luanxu(e);for(var a=0;a<e.length;a++){var i=e[a],r={};r.name=i.title,r.value=i.n_citation,r.id=i.id,this.paperCitation.push(r)}},fillCites:function(t){for(var e=0,a=9999,i=void 0,r={},n={},o=0;o<t.year_citation.length;o++){var s=t.year_citation[o];i=parseInt(s.year),r[s.year]=s.cnt,i>e&&(e=i),i<a&&(a=i)}for(var l=0;l<t.year_pubs.length;l++){var c=t.year_pubs[l];i=parseInt(c.year),n[c.year]=c.cnt,i>e&&(e=i),i<a&&(a=i)}for(var u=a,p=0;u<=e;u++,p++){this.$data.years.push(u);var h=""+u;r.hasOwnProperty(h)?this.y_cites[p]=r[h]:this.y_cites[p]=0,n.hasOwnProperty(h)?this.y_pub[p]=n[h]:this.y_pub[p]=0}}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-container",{staticStyle:{display:"flex","justify-content":"center","flex-direction":"column"}},[a("div",[a("Nav_with_searchBox")],1),t._v(" "),a("el-main",[a("div",{staticStyle:{display:"flex","flex-direction":"column","align-items":"center"}},[a("div",{staticClass:"IName"},[a("el-col",[a("el-row",{staticClass:"Iname_font"},[t._v("\n              "+t._s(this.InstitutionName)+"\n            ")]),t._v(" "),a("el-row",{staticStyle:{"margin-top":"23px","margin-left":"25px"}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("i",{staticClass:"el-icon-user",staticStyle:{color:"#6E6E6E"}},[t._v("成员总数： "),a("a",{staticStyle:{color:"#589ba7"}},[t._v(" "+t._s(this.members))]),t._v(" 人")])]),t._v(" "),a("el-col",{attrs:{span:6}},[a("i",{staticClass:"el-icon-collection-tag",staticStyle:{color:"#6E6E6E"}},[t._v("论文引用总次数： "),a("a",{staticStyle:{color:"#589ba7"}},[t._v(" "+t._s(this.citeTime))]),t._v(" 次")])]),t._v(" "),a("el-col",{attrs:{span:10,offset:1}},[a("i",{staticClass:"el-icon-star-on",staticStyle:{color:"#6E6E6E"}},[t._v(" 总发布论文数: "),a("a",{staticStyle:{color:"#589ba7"}},[t._v(t._s(this.RG_score))]),t._v(" 篇")])])],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"statistics"},[a("el-row",[a("div",{staticStyle:{"font-family":"siyuan","font-weight":"bold","font-size":"25px","text-align":"center","margin-bottom":"40px","margin-top":"20px"}},[t._v("\n              数据统计\n            ")])]),t._v(" "),a("div",{staticStyle:{width:"1000px",display:"flex","justify-content":"center"}},[a("div",{staticStyle:{width:"475px",display:"flex","justify-content":"center"}},[a("div",{attrs:{id:"chart1"}})]),t._v(" "),a("div",{staticStyle:{width:"475px",display:"flex","justify-content":"center"}},[a("div",{attrs:{id:"chart2"}})])]),t._v(" "),a("div",{staticStyle:{width:"1000px","margin-top":"40px","margin-bottom":"60px",display:"flex","justify-content":"center"}},[a("div",{staticStyle:{width:"475px",display:"flex","justify-content":"center"}},[a("div",{attrs:{id:"chart3"}})]),t._v(" "),a("div",{staticStyle:{width:"475px",display:"flex","justify-content":"center"}},[a("div",{attrs:{id:"chart4"}})])])],1),t._v(" "),a("div",{staticClass:"authors"},[a("div",{staticStyle:{display:"flex","flex-direction":"column"}},[a("div",{staticStyle:{"font-family":"siyuan","font-weight":"bold","font-size":"25px","text-align":"center","margin-top":"20px",height:"50px"}},[t._v("\n              成员列表\n            ")]),t._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"center","margin-bottom":"10px"}},[a("a",{staticStyle:{"font-family":"Georgia","font-size":"20px",color:"#34898f"}},[t._v(t._s(this.members))]),t._v(" "),a("a",{staticStyle:{"font-family":"siyuan","font-size":"13px",color:"#848484","margin-left":"5px"}},[t._v("名成员")])]),t._v(" "),a("div",{staticStyle:{display:"flex","flex-direction":"column"}},[t.modalShow?a("div",{staticStyle:{display:"flex","justify-content":"center"}},[a("div",{staticStyle:{display:"flex","flex-direction":"column",width:"800px"}},t._l(t.authors.slice((t.currentPage_author-1)*t.pagesize_author,t.currentPage_author*t.pagesize_author),function(e,i){return a("div",{key:i,staticStyle:{"margin-top":"10px"}},[a("div",{staticStyle:{display:"flex","justify-content":"space-around"}},t._l(e,function(e,r){return a("el-tooltip",{key:r,attrs:{placement:"top",effect:"light"}},[a("div",{attrs:{slot:"content"},slot:"content"},[t._v("姓名："+t._s(e.name)),a("br"),t._v("被引次数："+t._s(e.cite)),a("br"),t._v("发表文章数："+t._s(e.pubs))]),t._v(" "),a("div",{staticStyle:{display:"flex","flex-direction":"column",cursor:"pointer"},on:{click:function(a){return t.jump2authors(e.id)}}},[a("div",{staticStyle:{display:"flex","justify-content":"center"}},[a("el-avatar",{staticStyle:{"margin-left":"10px","margin-top":"10px","background-color":"#81DAF5"},attrs:{size:50,src:t.pic[t.currentPage_author][i*t.row_size+r]}})],1),t._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"center","flex-wrap":"wrap",width:"100px"}},[a("div",{staticStyle:{"font-family":"Gabriola","font-size":"16px"}},[t._v("\n                              "+t._s(t.shortName(e.name))+"\n                            ")])])])])}),1)])}),0)]):t._e(),t._v(" "),a("div",{staticStyle:{display:"flex","flex-direction":"row","justify-content":"center"}},[a("el-pagination",{staticClass:"greyPage",staticStyle:{"margin-top":"30px"},attrs:{small:"",layout:"prev, pager, next",total:t.authors.length,"current-page":t.currentPage_author,"page-size":t.pagesize_author},on:{"current-change":t.handleCurrentChange_author}})],1)])])]),t._v(" "),a("div",{staticClass:"papers"},[a("div",[a("div",{staticStyle:{"font-family":"siyuan","font-weight":"bold","font-size":"25px","text-align":"center","margin-bottom":"10px","margin-top":"20px"}},[t._v("\n              论文概览\n            ")])]),t._v(" "),a("div",{staticClass:"paperFather"},[t._l(t.papers.slice((t.currentPage-1)*t.pagesize,t.currentPage*t.pagesize),function(e,i){return a("div",{key:i,staticStyle:{"font-family":"Georgia","margin-top":"25px"}},[a("div",{staticStyle:{"background-color":"#FFF","box-shadow":"1px 2px 8px 1px rgba(0, 0, 0, .12), 0 0 12px rgba(0, 0, 0, .04)",padding:"15px"},on:{click:function(a){return t.jump2papers(e.id)}}},[a("el-row",[a("el-col",{attrs:{span:1}},[a("div",{staticClass:"xuhao"},[t._v(t._s(i+1))])]),t._v(" "),a("el-col",{attrs:{span:18}},[a("el-row",{staticClass:"paper_title",staticStyle:{"margin-top":"5px"}},[t._v("\n                    "+t._s(e.title)+"\n                  ")])],1),t._v(" "),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"cites"},[t._v("被引次数："+t._s(e.cites))])])],1)],1)])}),t._v(" "),a("el-pagination",{staticStyle:{"margin-top":"30px","margin-bottom":"20px"},attrs:{background:"",layout:"prev, pager, next",total:t.papers.length,"current-page":t.currentPage,"page-size":t.pagesize,align:"center"},on:{"current-change":t.handleCurrentChange}})],2)])])])],1)],1)},staticRenderFns:[]};var c=a("VU/8")(s,l,!1,function(t){a("xNKt")},"data-v-63a28e00",null);e.default=c.exports}});
//# sourceMappingURL=12.e550cc7d2357f5da9b48.js.map