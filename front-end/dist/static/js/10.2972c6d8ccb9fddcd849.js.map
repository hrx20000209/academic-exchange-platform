{"version":3,"sources":["webpack:///src/components/authorSearchResult.vue","webpack:///./src/components/authorSearchResult.vue?aea1","webpack:///./src/components/authorSearchResult.vue","webpack:///src/views/userPage/identification.vue","webpack:///./src/views/userPage/identification.vue?6a5e","webpack:///./src/views/userPage/identification.vue"],"names":["authorSearchResult","name","props","data","circleUrl","email","code","dialogVisible","methods","changeActive","$event","currentTarget","className","removeActive","jumpToAuthorPage","author_id","route","this","$router","resolve","query","id","window","open","href","openDialog","_this","Object","api","author","_source","then","response","ifHaveAccount","$message","type","message","sendCode","_this2","to_email","close","text","confirm","_this3","re_yzm","user_id","push","path","components_authorSearchResult","render","_vm","_h","$createElement","_c","_self","staticClass","on","mouseover","mouseleave","attrs","size","src","_v","_s","_l","org","key","n_pubs","n_citation","staticStyle","margin-left","plain","click","title","visible","width","append-to-body","update:visible","margin-top","model","value","callback","$$v","expression","staticRenderFns","identification","components","AuthorSearchResult","__webpack_require__","normalizeComponent","ssrContext","Nav_with_searchBox","nav_with_searchBox","step","success","info","institution","rules","required","trigger","authorList","mounted","localStorage","getItem","checkInput","search","elastic_search","getAuthor","hits","userPage_identification","ref","label-width","label","prop","placeholder","change","$set","text-align","length","description","item","_e","active","finish-status","icon","identification_Component","identification_normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/10.2972c6d8ccb9fddcd849.js","sourcesContent":["<template>\n  <div>\n    <div class=\"main-body\" @mouseover=\"changeActive($event)\" @mouseleave=\"removeActive($event)\">\n      <div>\n        <el-avatar :size=\"85\" :src=\"circleUrl\"></el-avatar>\n      </div>\n      <div class=\"right-box\">\n        <div class=\"name-box\">\n          <h2> {{ author._source.name }} </h2>\n        </div>\n        <div v-for=\"org in author._source.orgs\" :key=\"org.id\" class=\"orgs-box\">\n          {{ org.name }}\n        </div>\n        <div class=\"detail-box\">\n          <div class=\"detail-item-box\">\n            <a class=\"title\">发表文章：</a>\n            {{ author._source.n_pubs }}\n          </div>\n          <div class=\"detail-box\">\n            <a class=\"title\">被引次数：</a>\n            {{ author._source.n_citation }}\n          </div>\n        </div>\n      </div>\n      <div class=\"btn-box\">\n        <el-button type=\"primary\"\n                   plain\n                   style=\"margin-left: 10px\"\n                   @click=\"jumpToAuthorPage(author._source.id)\">\n          前往查看</el-button>\n        <el-button type=\"primary\" plain @click=\"openDialog\">我要认证</el-button>\n      </div>\n    </div>\n    <el-dialog\n      title=\"邮箱认证\"\n      :visible.sync=\"dialogVisible\"\n      width=\"35%\"\n      @close=\"close\"\n      append-to-body>\n      <div class=\"letter-body\">\n        <div class=\"letter-title\">\n          <p>您是 {{ author._source.name }} ?  </p>\n          <p>我们将通过邮箱验证的方式确认您的身份。</p>\n        </div>\n        <div class=\"email-box\">\n          <a style=\"margin-top: 1%\">邮箱：</a>\n          <div style=\"width: 50%;\">\n            <el-input v-model=\"email\" size=\"medium\"></el-input>\n          </div>\n          <el-button type=\"primary\" class=\"send-code-btn\" @click=\"sendCode\">发送验证码</el-button>\n        </div>\n        <div class=\"email-box\">\n          <a style=\"margin-top: 1%; width: 18%\">验证码：</a>\n          <div style=\"width: 75%;\">\n            <el-input v-model=\"code\" size=\"medium\" ></el-input>\n          </div>\n        </div>\n        <div class=\"letter-btn-box\">\n          <el-button type=\"primary\" @click=\"confirm\">确定</el-button>\n        </div>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { identify, checkAuthor, emailIdentify, emailConfirm } from \"../request/api\";\nexport default {\n  name: \"authorSearchResult\",\n  props: ['author', 'user_id'],\n  data() {\n    return {\n      circleUrl: \"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png\",\n      email: '',\n      code: '',\n      dialogVisible: false\n    }\n  },\n  methods: {\n    changeActive($event) {\n      $event.currentTarget.className=\"main-body-move\";\n    },\n    removeActive($event) {\n      $event.currentTarget.className=\"main-body\";\n    },\n    jumpToAuthorPage(author_id) {\n      const route = this.$router.resolve({\n        name: 'authorPage',\n        query: {\n          id: author_id\n        }\n      })\n      window.open(route.href, '_blank')\n    },\n    openDialog() {\n      checkAuthor({\n        author_id: this.author._source.id\n      }).then(response => {\n        if (response.ifHaveAccount) {\n          this.$message({\n            type: 'warning',\n            message: '该门户已被认证'\n          })\n        } else {\n          this.dialogVisible = true\n        }\n      })\n    },\n    sendCode() {\n      emailIdentify({\n        to_email: this.email\n      }).then(response => {\n        if (response.message == 'success') {\n          this.$message({\n            type: 'success',\n            message: '验证码已发送'\n          })\n        }\n      })\n    },\n    close() {\n      this.email = ''\n      this.text = ''\n    },\n    confirm() {\n      emailConfirm({\n        to_email: this.email,\n        re_yzm: this.code\n      }).then(response => {\n        if (response.message == 'success') {\n          identify({\n            user_id: this.user_id,\n            author_id: this.author._source.id\n          }).then(response => {\n            if (response.message == 'Identify success') {\n              this.$message({\n                type: 'success',\n                message: '认证成功'\n              })\n              this.$router.push({\n                path: 'userHome',\n                query: {\n                  id: this.user_id\n                }\n              })\n            }\n            this.dialogVisible = false\n          })\n        } else {\n          this.$message({\n            type: 'warning',\n            message: '验证码错误'\n          })\n        }\n      })\n    }\n  },\n}\n</script>\n\n<style scoped>\n.main-body {\n  width: 58vw;\n  padding-top: 1%;\n  padding-left: 3%;\n  padding-bottom: 1%;\n  display: flex;\n  margin-bottom: 3%;\n}\n\n.main-body-move {\n  width: 58vw;\n  padding-top: 1%;\n  padding-left: 3%;\n  padding-bottom: 1%;\n  display: flex;\n  background-color: lightskyblue;\n  margin-bottom: 3%;\n}\n\n.name-box {\n\n}\n\n.right-box {\n  margin-left: 3%;\n}\n\n.detail-box {\n  margin-top: 1%;\n  width: 20vw;\n  display: flex;\n}\n\n.orgs-box {\n  width: 40vw;\n}\n\n.detail-item-box {\n  margin-right: 10%;\n  width: 100%;\n}\n\n.btn-box {\n  margin-top: 1%;\n  margin-right: 10%;\n  display: block;\n}\n\n.title {\n  color: grey;\n}\n\n.el-button {\n  margin-bottom: 5%;\n  border-radius: 20px;\n}\n\n.send-code-btn {\n  margin-left: 5%;\n  border-radius: 10px;\n}\n\n.letter-body {\n  margin-left: 5%;\n  margin-right: 5%;\n  margin-top: 2%;\n}\n\n.letter-title {\n  margin-bottom: 5%;\n}\n\n.letter-btn-box {\n  text-align: center;\n  margin-top: 5%;\n}\n\n.email-box {\n  display: flex;\n  font-size: larger;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/authorSearchResult.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"main-body\",on:{\"mouseover\":function($event){return _vm.changeActive($event)},\"mouseleave\":function($event){return _vm.removeActive($event)}}},[_c('div',[_c('el-avatar',{attrs:{\"size\":85,\"src\":_vm.circleUrl}})],1),_vm._v(\" \"),_c('div',{staticClass:\"right-box\"},[_c('div',{staticClass:\"name-box\"},[_c('h2',[_vm._v(\" \"+_vm._s(_vm.author._source.name)+\" \")])]),_vm._v(\" \"),_vm._l((_vm.author._source.orgs),function(org){return _c('div',{key:org.id,staticClass:\"orgs-box\"},[_vm._v(\"\\n        \"+_vm._s(org.name)+\"\\n      \")])}),_vm._v(\" \"),_c('div',{staticClass:\"detail-box\"},[_c('div',{staticClass:\"detail-item-box\"},[_c('a',{staticClass:\"title\"},[_vm._v(\"发表文章：\")]),_vm._v(\"\\n          \"+_vm._s(_vm.author._source.n_pubs)+\"\\n        \")]),_vm._v(\" \"),_c('div',{staticClass:\"detail-box\"},[_c('a',{staticClass:\"title\"},[_vm._v(\"被引次数：\")]),_vm._v(\"\\n          \"+_vm._s(_vm.author._source.n_citation)+\"\\n        \")])])],2),_vm._v(\" \"),_c('div',{staticClass:\"btn-box\"},[_c('el-button',{staticStyle:{\"margin-left\":\"10px\"},attrs:{\"type\":\"primary\",\"plain\":\"\"},on:{\"click\":function($event){return _vm.jumpToAuthorPage(_vm.author._source.id)}}},[_vm._v(\"\\n        前往查看\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"plain\":\"\"},on:{\"click\":_vm.openDialog}},[_vm._v(\"我要认证\")])],1)]),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"邮箱认证\",\"visible\":_vm.dialogVisible,\"width\":\"35%\",\"append-to-body\":\"\"},on:{\"update:visible\":function($event){_vm.dialogVisible=$event},\"close\":_vm.close}},[_c('div',{staticClass:\"letter-body\"},[_c('div',{staticClass:\"letter-title\"},[_c('p',[_vm._v(\"您是 \"+_vm._s(_vm.author._source.name)+\" ?  \")]),_vm._v(\" \"),_c('p',[_vm._v(\"我们将通过邮箱验证的方式确认您的身份。\")])]),_vm._v(\" \"),_c('div',{staticClass:\"email-box\"},[_c('a',{staticStyle:{\"margin-top\":\"1%\"}},[_vm._v(\"邮箱：\")]),_vm._v(\" \"),_c('div',{staticStyle:{\"width\":\"50%\"}},[_c('el-input',{attrs:{\"size\":\"medium\"},model:{value:(_vm.email),callback:function ($$v) {_vm.email=$$v},expression:\"email\"}})],1),_vm._v(\" \"),_c('el-button',{staticClass:\"send-code-btn\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.sendCode}},[_vm._v(\"发送验证码\")])],1),_vm._v(\" \"),_c('div',{staticClass:\"email-box\"},[_c('a',{staticStyle:{\"margin-top\":\"1%\",\"width\":\"18%\"}},[_vm._v(\"验证码：\")]),_vm._v(\" \"),_c('div',{staticStyle:{\"width\":\"75%\"}},[_c('el-input',{attrs:{\"size\":\"medium\"},model:{value:(_vm.code),callback:function ($$v) {_vm.code=$$v},expression:\"code\"}})],1)]),_vm._v(\" \"),_c('div',{staticClass:\"letter-btn-box\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.confirm}},[_vm._v(\"确定\")])],1)])])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-591113a2\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/authorSearchResult.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true,\\\"minimize\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-591113a2\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./authorSearchResult.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./authorSearchResult.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./authorSearchResult.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-591113a2\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./authorSearchResult.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-591113a2\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/authorSearchResult.vue\n// module id = null\n// module chunks = ","<template>\n  <div class=\"background\">\n    <nav_with_search-box></nav_with_search-box>\n    <div class=\"main\">\n      <h2 class=\"title-box\">认证学者申请</h2>\n      <div class=\"description-box\">\n        请按照要求如实填写以下信息，信息的真实性将提高搜索结果的准确度。\n      </div>\n      <div class=\"form-box\">\n        <el-form ref=\"form\" :model=\"info\" :rules=\"rules\" label-width=\"100px\">\n          <el-form-item label=\"姓名\" prop=\"name\">\n            <el-input\n              v-model=\"info.name\"\n              placeholder=\"请输入真实姓名（必填）\"\n              @change=\"checkInput\"\n            ></el-input>\n          </el-form-item>\n          <el-form-item label=\"机构\" prop=\"institution\">\n            <el-input\n              v-model=\"info.institution\"\n              placeholder=\"填写请尽量细化，比如xx大学xx学院xx系，xx医院xx科等\"\n              @change=\"checkInput\"\n            ></el-input>\n          </el-form-item>\n          <el-form-item style=\"text-align: center\">\n            <el-button type=\"primary\" @click=\"search\">搜索</el-button>\n          </el-form-item>\n        </el-form>\n      </div>\n      <div v-if=\"success\">\n        <div class=\"search-result-text\">\n          为您检索到以下结果：\n        </div>\n        <div class=\"search-result\">\n          <div v-if=\"authorList.length===0\">\n            <el-empty description=\"对不起，没有找到相关学者\"></el-empty>\n          </div>\n          <div v-for=\"item in authorList\" :key=\"item.id\" v-else>\n            <author-search-result\n              :author=\"item\"\n              :user_id=\"user_id\"\n            />\n          </div>\n        </div>\n      </div>\n      <div class=\"step-box\">\n        <el-steps :active=\"step\" finish-status=\"success\">\n          <el-step title=\"第一步 用户填写信息\" description=\"请按照实际情况填写信息\"></el-step>\n          <el-step title=\"第二步 搜索门户\" description=\"点击搜索按钮查找是否有您的门户\"></el-step>\n          <el-step title=\"第三步 邮箱验证\" description=\"通过邮箱验证码对您的身份进行确认\"></el-step>\n          <el-step title=\"认证完成\" description=\"学者门户将与您的账号绑定\"></el-step>\n        </el-steps>\n      </div>\n      <div class=\"bottom-box\">\n        <div class=\"result-box\" v-if=\"step===3\">\n          <el-result icon=\"warning\" title=\"验证中\"></el-result>\n        </div>\n        <div class=\"result-box\" v-else-if=\"step===4\">\n          <el-result icon=\"success\" title=\"认证完成\"></el-result>\n        </div>\n        <div class=\"result-box\" v-else>\n          <el-result icon=\"info\" title=\"未认证\"></el-result>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Nav_with_searchBox from \"../../components/nav_with_searchBox\"\nimport ESApi from \"../../api/elastic search\"\nimport AuthorSearchResult from \"../../components/authorSearchResult\";\nexport default {\n  name: \"identification\",\n  components: {AuthorSearchResult, Nav_with_searchBox },\n  data() {\n    return {\n      user_id: '',\n      step: 1,\n      success: false,\n      info: {\n        name: '',\n        institution: '',\n        email: ''\n      },\n      rules: {\n        name: [\n          { required: true, message: '请输入真实姓名', trigger: 'blur' },\n        ],\n        institution: [\n          { required: true, message: '请输入所属机构', trigger: 'blur' },\n        ],\n      },\n      authorList: []\n    }\n  },\n  mounted() {\n    this.user_id = localStorage.getItem('user_id')\n  },\n  methods: {\n    checkInput() {\n      if (this.step === 0 && this.info.name !== '' && this.info.institution !== '' && this.info.email !== '') {\n        this.step = 1\n      } else if (this.step === 1) {\n        this.step = 0\n      }\n    },\n    search() {\n      if (this.info.name === '') {\n        this.$message({\n          type: 'warning',\n          message: '姓名不能为空'\n        });\n      }\n      else if (this.info.institution === '') {\n        this.$message({\n          type: 'warning',\n          message: '机构不能为空'\n        });\n      } else {\n        ESApi.getAuthor(this.info.name, this.info.institution).then(response => {\n          this.authorList = response.data.hits.hits\n        })\n        this.success = true\n        this.step = 2\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.background {\n  position: fixed;\n  height: 100vh;\n  overflow-y: auto;\n  width: 100%;\n  background-color: #ededed;\n}\n\n.main {\n  margin-left: 5%;\n  margin-right: 5%;\n  height: 100vh;\n  overflow-y: auto;\n  background-color: white;\n}\n\n.title-box {\n  padding-top: 3%;\n  text-align: center;\n}\n\n.description-box {\n  margin-top: 1%;\n  text-align: center;\n}\n\n.step-box {\n  margin-left: 18%;\n  margin-right: 12%;\n  margin-top: 3%;\n  width: 70%;\n}\n\n.form-box {\n  position: center;\n  margin-left: 26%;\n  margin-top: 2%;\n  width: 40%;\n}\n\n.result-box {\n  margin-top: 2%;\n  width: 20%;\n  text-align: center;\n  box-shadow: 0 0 10px 5px lightgrey;\n  border-radius: 25px;\n}\n\n.bottom-box {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-top: 3%;\n  margin-bottom: 5%;\n}\n\n.search-result {\n  margin-left: 15%;\n  margin-right: 15%;\n  margin-bottom: 5%;\n}\n\n.search-result-text {\n  margin-left: 13%;\n  margin-bottom: 2%;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/userPage/identification.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"background\"},[_c('nav_with_search-box'),_vm._v(\" \"),_c('div',{staticClass:\"main\"},[_c('h2',{staticClass:\"title-box\"},[_vm._v(\"认证学者申请\")]),_vm._v(\" \"),_c('div',{staticClass:\"description-box\"},[_vm._v(\"\\n      请按照要求如实填写以下信息，信息的真实性将提高搜索结果的准确度。\\n    \")]),_vm._v(\" \"),_c('div',{staticClass:\"form-box\"},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.info,\"rules\":_vm.rules,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"姓名\",\"prop\":\"name\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入真实姓名（必填）\"},on:{\"change\":_vm.checkInput},model:{value:(_vm.info.name),callback:function ($$v) {_vm.$set(_vm.info, \"name\", $$v)},expression:\"info.name\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"机构\",\"prop\":\"institution\"}},[_c('el-input',{attrs:{\"placeholder\":\"填写请尽量细化，比如xx大学xx学院xx系，xx医院xx科等\"},on:{\"change\":_vm.checkInput},model:{value:(_vm.info.institution),callback:function ($$v) {_vm.$set(_vm.info, \"institution\", $$v)},expression:\"info.institution\"}})],1),_vm._v(\" \"),_c('el-form-item',{staticStyle:{\"text-align\":\"center\"}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.search}},[_vm._v(\"搜索\")])],1)],1)],1),_vm._v(\" \"),(_vm.success)?_c('div',[_c('div',{staticClass:\"search-result-text\"},[_vm._v(\"\\n        为您检索到以下结果：\\n      \")]),_vm._v(\" \"),_c('div',{staticClass:\"search-result\"},[(_vm.authorList.length===0)?_c('div',[_c('el-empty',{attrs:{\"description\":\"对不起，没有找到相关学者\"}})],1):_vm._l((_vm.authorList),function(item){return _c('div',{key:item.id},[_c('author-search-result',{attrs:{\"author\":item,\"user_id\":_vm.user_id}})],1)})],2)]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"step-box\"},[_c('el-steps',{attrs:{\"active\":_vm.step,\"finish-status\":\"success\"}},[_c('el-step',{attrs:{\"title\":\"第一步 用户填写信息\",\"description\":\"请按照实际情况填写信息\"}}),_vm._v(\" \"),_c('el-step',{attrs:{\"title\":\"第二步 搜索门户\",\"description\":\"点击搜索按钮查找是否有您的门户\"}}),_vm._v(\" \"),_c('el-step',{attrs:{\"title\":\"第三步 邮箱验证\",\"description\":\"通过邮箱验证码对您的身份进行确认\"}}),_vm._v(\" \"),_c('el-step',{attrs:{\"title\":\"认证完成\",\"description\":\"学者门户将与您的账号绑定\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"bottom-box\"},[(_vm.step===3)?_c('div',{staticClass:\"result-box\"},[_c('el-result',{attrs:{\"icon\":\"warning\",\"title\":\"验证中\"}})],1):(_vm.step===4)?_c('div',{staticClass:\"result-box\"},[_c('el-result',{attrs:{\"icon\":\"success\",\"title\":\"认证完成\"}})],1):_c('div',{staticClass:\"result-box\"},[_c('el-result',{attrs:{\"icon\":\"info\",\"title\":\"未认证\"}})],1)])])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-879487f8\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/userPage/identification.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true,\\\"minimize\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-879487f8\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./identification.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./identification.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./identification.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-879487f8\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./identification.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-879487f8\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/userPage/identification.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}