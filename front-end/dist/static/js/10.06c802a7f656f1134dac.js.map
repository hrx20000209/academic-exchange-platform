{"version":3,"sources":["webpack:///src/components/authorSearchResult.vue","webpack:///./src/components/authorSearchResult.vue?381e","webpack:///./src/components/authorSearchResult.vue","webpack:///src/views/userPage/identification.vue","webpack:///./src/views/userPage/identification.vue?5032","webpack:///./src/views/userPage/identification.vue"],"names":["authorSearchResult","name","props","data","circleUrl","email","code","dialogVisible","methods","changeActive","$event","currentTarget","className","removeActive","jumpToAuthorPage","author_id","route","this","$router","resolve","query","id","window","open","href","openDialog","_this","Object","api","author","_source","then","response","ifHaveAccount","$message","type","message","sendCode","_this2","length","to_email","close","text","confirm","_this3","re_yzm","user_id","console","log","push","path","components_authorSearchResult","render","_vm","_h","$createElement","_c","_self","staticClass","on","mouseover","mouseleave","attrs","size","src","_v","_s","_l","org","key","n_pubs","n_citation","staticStyle","margin-left","plain","click","title","visible","width","append-to-body","update:visible","placeholder","model","value","callback","$$v","expression","staticRenderFns","identification","components","AuthorSearchResult","__webpack_require__","normalizeComponent","ssrContext","Nav_with_searchBox","nav_with_searchBox","step","success","info","institution","rules","required","trigger","authorList","mounted","localStorage","getItem","checkInput","search","elastic_search","getAuthor","hits","userPage_identification","ref","label-width","label","prop","change","$set","text-align","description","item","_e","active","finish-status","icon","identification_Component","identification_normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/10.06c802a7f656f1134dac.js","sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"main-body\" @mouseover=\"changeActive($event)\" @mouseleave=\"removeActive($event)\">\r\n      <div>\r\n        <el-avatar :size=\"85\" :src=\"circleUrl\"></el-avatar>\r\n      </div>\r\n      <div class=\"right-box\">\r\n        <div class=\"name-box\">\r\n          <h2> {{ author._source.name }} </h2>\r\n        </div>\r\n        <div v-for=\"org in author._source.orgs\" :key=\"org.id\" class=\"orgs-box\">\r\n          {{ org.name }}\r\n        </div>\r\n        <div class=\"detail-box\">\r\n          <div class=\"detail-item-box\">\r\n            <a class=\"title\">发表文章：</a>\r\n            {{ author._source.n_pubs }}\r\n          </div>\r\n          <div class=\"detail-box\">\r\n            <a class=\"title\">被引次数：</a>\r\n            {{ author._source.n_citation }}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"btn-box\">\r\n        <el-button type=\"primary\"\r\n                   plain\r\n                   style=\"margin-left: 10px\"\r\n                   @click=\"jumpToAuthorPage(author._source.id)\">\r\n          前往查看</el-button>\r\n        <el-button type=\"primary\" plain @click=\"openDialog\">我要认证</el-button>\r\n      </div>\r\n    </div>\r\n    <el-dialog\r\n      title=\"邮箱认证\"\r\n      :visible.sync=\"dialogVisible\"\r\n      width=\"35%\"\r\n      @close=\"close\"\r\n      append-to-body>\r\n      <div class=\"letter-body\">\r\n        <div class=\"letter-title\">\r\n          <p>您是 <a class=\"author-name\">{{ author._source.name }}</a>  ?  </p>\r\n          <p>我们将通过邮箱验证的方式确认您的身份。</p>\r\n        </div>\r\n        <div class=\"email-box\">\r\n          <div style=\"width: 100%;\">\r\n            <el-input v-model=\"email\" size=\"medium\" placeholder=\"请输入邮箱\"></el-input>\r\n          </div>\r\n        </div>\r\n        <div class=\"email-box\">\r\n          <div style=\"width: 75%;\">\r\n            <el-input v-model=\"code\" size=\"medium\" placeholder=\"请输入验证码\"></el-input>\r\n          </div>\r\n          <el-button type=\"primary\" class=\"send-code-btn\" @click=\"sendCode\">发送验证码</el-button>\r\n        </div>\r\n        <div class=\"letter-btn-box\">\r\n          <el-button type=\"primary\" @click=\"confirm\">确定</el-button>\r\n        </div>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { identify, checkAuthor, emailIdentify, emailConfirm } from \"../request/api\";\r\nexport default {\r\n  name: \"authorSearchResult\",\r\n  props: ['author', 'user_id'],\r\n  data() {\r\n    return {\r\n      circleUrl: \"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png\",\r\n      email: '',\r\n      code: '',\r\n      dialogVisible: false\r\n    }\r\n  },\r\n  methods: {\r\n    changeActive($event) {\r\n      $event.currentTarget.className=\"main-body-move\";\r\n    },\r\n    removeActive($event) {\r\n      $event.currentTarget.className=\"main-body\";\r\n    },\r\n    jumpToAuthorPage(author_id) {\r\n      const route = this.$router.resolve({\r\n        name: 'authorPage',\r\n        query: {\r\n          id: author_id\r\n        }\r\n      })\r\n      window.open(route.href, '_blank')\r\n    },\r\n    openDialog() {\r\n      checkAuthor({\r\n        author_id: this.author._source.id\r\n      }).then(response => {\r\n        if (response.ifHaveAccount) {\r\n          this.$message({\r\n            type: 'warning',\r\n            message: '该门户已被认证'\r\n          })\r\n        } else {\r\n          this.dialogVisible = true\r\n        }\r\n      })\r\n    },\r\n    sendCode() {\r\n      if (this.email.length === 0) {\r\n        this.$message({\r\n          type: 'warning',\r\n          message: '邮箱不能为空'\r\n        })\r\n      } else {\r\n        emailIdentify({\r\n          to_email: this.email\r\n        }).then(response => {\r\n          if (response.message == 'success') {\r\n            this.$message({\r\n              type: 'success',\r\n              message: '验证码已发送'\r\n            })\r\n          }\r\n        })\r\n      }\r\n    },\r\n    close() {\r\n      this.email = ''\r\n      this.text = ''\r\n    },\r\n    confirm() {\r\n      emailConfirm({\r\n        to_email: this.email,\r\n        re_yzm: this.code\r\n      }).then(response => {\r\n        if (response.message == 'success') {\r\n          identify({\r\n            user_id: this.user_id,\r\n            author_id: this.author._source.id\r\n          }).then(response => {\r\n            console.log(response)\r\n            if (response.message == 'Identify success') {\r\n              this.$message({\r\n                type: 'success',\r\n                message: '认证成功'\r\n              })\r\n              this.$router.push({\r\n                path: 'userHome',\r\n                query: {\r\n                  id: this.user_id\r\n                }\r\n              })\r\n            }\r\n            this.dialogVisible = false\r\n          })\r\n        } else {\r\n          this.$message({\r\n            type: 'warning',\r\n            message: '验证码错误'\r\n          })\r\n        }\r\n      })\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.main-body {\r\n  width: 58vw;\r\n  padding-top: 1%;\r\n  padding-left: 3%;\r\n  padding-bottom: 1%;\r\n  display: flex;\r\n  margin-bottom: 3%;\r\n}\r\n\r\n.main-body-move {\r\n  width: 58vw;\r\n  padding-top: 1%;\r\n  padding-left: 3%;\r\n  padding-bottom: 1%;\r\n  display: flex;\r\n  background-color: lightskyblue;\r\n  margin-bottom: 3%;\r\n}\r\n\r\n.name-box {\r\n\r\n}\r\n\r\n.right-box {\r\n  margin-left: 3%;\r\n}\r\n\r\n.detail-box {\r\n  margin-top: 1%;\r\n  width: 20vw;\r\n  display: flex;\r\n}\r\n\r\n.orgs-box {\r\n  width: 40vw;\r\n}\r\n\r\n.detail-item-box {\r\n  margin-right: 10%;\r\n  width: 100%;\r\n}\r\n\r\n.btn-box {\r\n  margin-top: 1%;\r\n  margin-right: 10%;\r\n  display: block;\r\n}\r\n\r\n.title {\r\n  color: grey;\r\n}\r\n\r\n.el-button {\r\n  margin-bottom: 5%;\r\n  border-radius: 20px;\r\n}\r\n\r\n.send-code-btn {\r\n  margin-left: 5%;\r\n  border-radius: 10px;\r\n}\r\n\r\n.letter-body {\r\n  margin-left: 5%;\r\n  margin-right: 5%;\r\n  margin-top: 2%;\r\n}\r\n\r\n.letter-title {\r\n  margin-bottom: 5%;\r\n}\r\n\r\n.letter-btn-box {\r\n  text-align: center;\r\n  margin-top: 5%;\r\n}\r\n\r\n.email-box {\r\n  margin-bottom: 3%;\r\n  display: flex;\r\n  font-size: larger;\r\n}\r\n\r\n.author-name {\r\n  color: #00BFFF;\r\n  font-weight: bolder;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/authorSearchResult.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"main-body\",on:{\"mouseover\":function($event){return _vm.changeActive($event)},\"mouseleave\":function($event){return _vm.removeActive($event)}}},[_c('div',[_c('el-avatar',{attrs:{\"size\":85,\"src\":_vm.circleUrl}})],1),_vm._v(\" \"),_c('div',{staticClass:\"right-box\"},[_c('div',{staticClass:\"name-box\"},[_c('h2',[_vm._v(\" \"+_vm._s(_vm.author._source.name)+\" \")])]),_vm._v(\" \"),_vm._l((_vm.author._source.orgs),function(org){return _c('div',{key:org.id,staticClass:\"orgs-box\"},[_vm._v(\"\\n        \"+_vm._s(org.name)+\"\\n      \")])}),_vm._v(\" \"),_c('div',{staticClass:\"detail-box\"},[_c('div',{staticClass:\"detail-item-box\"},[_c('a',{staticClass:\"title\"},[_vm._v(\"发表文章：\")]),_vm._v(\"\\n          \"+_vm._s(_vm.author._source.n_pubs)+\"\\n        \")]),_vm._v(\" \"),_c('div',{staticClass:\"detail-box\"},[_c('a',{staticClass:\"title\"},[_vm._v(\"被引次数：\")]),_vm._v(\"\\n          \"+_vm._s(_vm.author._source.n_citation)+\"\\n        \")])])],2),_vm._v(\" \"),_c('div',{staticClass:\"btn-box\"},[_c('el-button',{staticStyle:{\"margin-left\":\"10px\"},attrs:{\"type\":\"primary\",\"plain\":\"\"},on:{\"click\":function($event){return _vm.jumpToAuthorPage(_vm.author._source.id)}}},[_vm._v(\"\\n        前往查看\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"plain\":\"\"},on:{\"click\":_vm.openDialog}},[_vm._v(\"我要认证\")])],1)]),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"邮箱认证\",\"visible\":_vm.dialogVisible,\"width\":\"35%\",\"append-to-body\":\"\"},on:{\"update:visible\":function($event){_vm.dialogVisible=$event},\"close\":_vm.close}},[_c('div',{staticClass:\"letter-body\"},[_c('div',{staticClass:\"letter-title\"},[_c('p',[_vm._v(\"您是 \"),_c('a',{staticClass:\"author-name\"},[_vm._v(_vm._s(_vm.author._source.name))]),_vm._v(\"  ?  \")]),_vm._v(\" \"),_c('p',[_vm._v(\"我们将通过邮箱验证的方式确认您的身份。\")])]),_vm._v(\" \"),_c('div',{staticClass:\"email-box\"},[_c('div',{staticStyle:{\"width\":\"100%\"}},[_c('el-input',{attrs:{\"size\":\"medium\",\"placeholder\":\"请输入邮箱\"},model:{value:(_vm.email),callback:function ($$v) {_vm.email=$$v},expression:\"email\"}})],1)]),_vm._v(\" \"),_c('div',{staticClass:\"email-box\"},[_c('div',{staticStyle:{\"width\":\"75%\"}},[_c('el-input',{attrs:{\"size\":\"medium\",\"placeholder\":\"请输入验证码\"},model:{value:(_vm.code),callback:function ($$v) {_vm.code=$$v},expression:\"code\"}})],1),_vm._v(\" \"),_c('el-button',{staticClass:\"send-code-btn\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.sendCode}},[_vm._v(\"发送验证码\")])],1),_vm._v(\" \"),_c('div',{staticClass:\"letter-btn-box\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.confirm}},[_vm._v(\"确定\")])],1)])])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0f469ac7\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/authorSearchResult.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true,\\\"minimize\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0f469ac7\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./authorSearchResult.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./authorSearchResult.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./authorSearchResult.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0f469ac7\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./authorSearchResult.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-0f469ac7\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/authorSearchResult.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div class=\"background\">\r\n    <nav_with_search-box></nav_with_search-box>\r\n    <div class=\"main\">\r\n      <h2 class=\"title-box\">认证学者申请</h2>\r\n      <div class=\"description-box\">\r\n        请按照要求如实填写以下信息，信息的真实性将提高搜索结果的准确度。\r\n      </div>\r\n      <div class=\"form-box\">\r\n        <el-form ref=\"form\" :model=\"info\" :rules=\"rules\" label-width=\"100px\">\r\n          <el-form-item label=\"姓名\" prop=\"name\">\r\n            <el-input\r\n              v-model=\"info.name\"\r\n              placeholder=\"请输入真实姓名（必填）\"\r\n              @change=\"checkInput\"\r\n            ></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"机构\" prop=\"institution\">\r\n            <el-input\r\n              v-model=\"info.institution\"\r\n              placeholder=\"填写请尽量细化，比如xx大学xx学院xx系，xx医院xx科等\"\r\n              @change=\"checkInput\"\r\n            ></el-input>\r\n          </el-form-item>\r\n          <el-form-item style=\"text-align: center\">\r\n            <el-button type=\"primary\" @click=\"search\">搜索</el-button>\r\n          </el-form-item>\r\n        </el-form>\r\n      </div>\r\n      <div v-if=\"success\">\r\n        <div class=\"search-result-text\">\r\n          为您检索到以下结果：\r\n        </div>\r\n        <div class=\"search-result\">\r\n          <div v-if=\"authorList.length===0\">\r\n            <el-empty description=\"对不起，没有找到相关学者\"></el-empty>\r\n          </div>\r\n          <div v-for=\"item in authorList\" :key=\"item.id\" v-else>\r\n            <author-search-result\r\n              :author=\"item\"\r\n              :user_id=\"user_id\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"step-box\">\r\n        <el-steps :active=\"step\" finish-status=\"success\">\r\n          <el-step title=\"第一步 用户填写信息\" description=\"请按照实际情况填写信息\"></el-step>\r\n          <el-step title=\"第二步 搜索门户\" description=\"点击搜索按钮查找是否有您的门户\"></el-step>\r\n          <el-step title=\"第三步 邮箱验证\" description=\"通过邮箱验证码对您的身份进行确认\"></el-step>\r\n          <el-step title=\"认证完成\" description=\"学者门户将与您的账号绑定\"></el-step>\r\n        </el-steps>\r\n      </div>\r\n      <div class=\"bottom-box\">\r\n        <div class=\"result-box\" v-if=\"step===3\">\r\n          <el-result icon=\"warning\" title=\"验证中\"></el-result>\r\n        </div>\r\n        <div class=\"result-box\" v-else-if=\"step===4\">\r\n          <el-result icon=\"success\" title=\"认证完成\"></el-result>\r\n        </div>\r\n        <div class=\"result-box\" v-else>\r\n          <el-result icon=\"info\" title=\"未认证\"></el-result>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Nav_with_searchBox from \"../../components/nav_with_searchBox\"\r\nimport ESApi from \"../../api/elastic search\"\r\nimport AuthorSearchResult from \"../../components/authorSearchResult\";\r\nexport default {\r\n  name: \"identification\",\r\n  components: {AuthorSearchResult, Nav_with_searchBox },\r\n  data() {\r\n    return {\r\n      user_id: '',\r\n      step: 1,\r\n      success: false,\r\n      info: {\r\n        name: '',\r\n        institution: '',\r\n        email: ''\r\n      },\r\n      rules: {\r\n        name: [\r\n          { required: true, message: '请输入真实姓名', trigger: 'blur' },\r\n        ],\r\n        institution: [\r\n          { required: true, message: '请输入所属机构', trigger: 'blur' },\r\n        ],\r\n      },\r\n      authorList: []\r\n    }\r\n  },\r\n  mounted() {\r\n    this.user_id = localStorage.getItem('user_id')\r\n  },\r\n  methods: {\r\n    checkInput() {\r\n      if (this.step === 0 && this.info.name !== '' && this.info.institution !== '' && this.info.email !== '') {\r\n        this.step = 1\r\n      } else if (this.step === 1) {\r\n        this.step = 0\r\n      }\r\n    },\r\n    search() {\r\n      if (this.info.name === '') {\r\n        this.$message({\r\n          type: 'warning',\r\n          message: '姓名不能为空'\r\n        });\r\n      }\r\n      else if (this.info.institution === '') {\r\n        this.$message({\r\n          type: 'warning',\r\n          message: '机构不能为空'\r\n        });\r\n      } else {\r\n        ESApi.getAuthor(this.info.name, this.info.institution).then(response => {\r\n          this.authorList = response.data.hits.hits\r\n        })\r\n        this.success = true\r\n        this.step = 2\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.background {\r\n  position: fixed;\r\n  height: 100vh;\r\n  overflow-y: auto;\r\n  width: 100%;\r\n  background-color: #ededed;\r\n}\r\n\r\n.main {\r\n  margin-left: 5%;\r\n  margin-right: 5%;\r\n  height: 100vh;\r\n  overflow-y: auto;\r\n  background-color: white;\r\n}\r\n\r\n.title-box {\r\n  padding-top: 3%;\r\n  text-align: center;\r\n}\r\n\r\n.description-box {\r\n  margin-top: 1%;\r\n  text-align: center;\r\n}\r\n\r\n.step-box {\r\n  margin-left: 18%;\r\n  margin-right: 12%;\r\n  margin-top: 3%;\r\n  width: 70%;\r\n}\r\n\r\n.form-box {\r\n  position: center;\r\n  margin-left: 26%;\r\n  margin-top: 2%;\r\n  width: 40%;\r\n}\r\n\r\n.result-box {\r\n  margin-top: 2%;\r\n  width: 20%;\r\n  text-align: center;\r\n  box-shadow: 0 0 10px 5px lightgrey;\r\n  border-radius: 25px;\r\n}\r\n\r\n.bottom-box {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  margin-top: 3%;\r\n  margin-bottom: 5%;\r\n}\r\n\r\n.search-result {\r\n  margin-left: 15%;\r\n  margin-right: 15%;\r\n  margin-bottom: 5%;\r\n}\r\n\r\n.search-result-text {\r\n  margin-left: 13%;\r\n  margin-bottom: 2%;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/userPage/identification.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"background\"},[_c('nav_with_search-box'),_vm._v(\" \"),_c('div',{staticClass:\"main\"},[_c('h2',{staticClass:\"title-box\"},[_vm._v(\"认证学者申请\")]),_vm._v(\" \"),_c('div',{staticClass:\"description-box\"},[_vm._v(\"\\n      请按照要求如实填写以下信息，信息的真实性将提高搜索结果的准确度。\\n    \")]),_vm._v(\" \"),_c('div',{staticClass:\"form-box\"},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.info,\"rules\":_vm.rules,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"姓名\",\"prop\":\"name\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入真实姓名（必填）\"},on:{\"change\":_vm.checkInput},model:{value:(_vm.info.name),callback:function ($$v) {_vm.$set(_vm.info, \"name\", $$v)},expression:\"info.name\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"机构\",\"prop\":\"institution\"}},[_c('el-input',{attrs:{\"placeholder\":\"填写请尽量细化，比如xx大学xx学院xx系，xx医院xx科等\"},on:{\"change\":_vm.checkInput},model:{value:(_vm.info.institution),callback:function ($$v) {_vm.$set(_vm.info, \"institution\", $$v)},expression:\"info.institution\"}})],1),_vm._v(\" \"),_c('el-form-item',{staticStyle:{\"text-align\":\"center\"}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.search}},[_vm._v(\"搜索\")])],1)],1)],1),_vm._v(\" \"),(_vm.success)?_c('div',[_c('div',{staticClass:\"search-result-text\"},[_vm._v(\"\\n        为您检索到以下结果：\\n      \")]),_vm._v(\" \"),_c('div',{staticClass:\"search-result\"},[(_vm.authorList.length===0)?_c('div',[_c('el-empty',{attrs:{\"description\":\"对不起，没有找到相关学者\"}})],1):_vm._l((_vm.authorList),function(item){return _c('div',{key:item.id},[_c('author-search-result',{attrs:{\"author\":item,\"user_id\":_vm.user_id}})],1)})],2)]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"step-box\"},[_c('el-steps',{attrs:{\"active\":_vm.step,\"finish-status\":\"success\"}},[_c('el-step',{attrs:{\"title\":\"第一步 用户填写信息\",\"description\":\"请按照实际情况填写信息\"}}),_vm._v(\" \"),_c('el-step',{attrs:{\"title\":\"第二步 搜索门户\",\"description\":\"点击搜索按钮查找是否有您的门户\"}}),_vm._v(\" \"),_c('el-step',{attrs:{\"title\":\"第三步 邮箱验证\",\"description\":\"通过邮箱验证码对您的身份进行确认\"}}),_vm._v(\" \"),_c('el-step',{attrs:{\"title\":\"认证完成\",\"description\":\"学者门户将与您的账号绑定\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"bottom-box\"},[(_vm.step===3)?_c('div',{staticClass:\"result-box\"},[_c('el-result',{attrs:{\"icon\":\"warning\",\"title\":\"验证中\"}})],1):(_vm.step===4)?_c('div',{staticClass:\"result-box\"},[_c('el-result',{attrs:{\"icon\":\"success\",\"title\":\"认证完成\"}})],1):_c('div',{staticClass:\"result-box\"},[_c('el-result',{attrs:{\"icon\":\"info\",\"title\":\"未认证\"}})],1)])])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-58b31b2e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/userPage/identification.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true,\\\"minimize\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-58b31b2e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./identification.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./identification.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./identification.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-58b31b2e\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./identification.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-58b31b2e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/userPage/identification.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}